@startuml

hide empty methods
!define schema(name, slug) package "name" as slug <<Rectangle>>
!define table(name, slug) entity "name" as slug << (T, white) table >>
!define view(name, slug) entity "name" as slug << (V, yellow) view >>
!define primary_key(name) <b><color:#b8861b><&key></color> name</b>
!define foreign_key(name) <color:#aaaaaa><&key></color> name
!define column(name) {field} <color:#efefef><&media-record></color> name

schema(books, books_599266b) {

table(authors, authors_8702b73d) {
  primary_key(id): int4 NOT NULL
  column(firstname): varchar NOT NULL
  column(lastname): varchar NOT NULL
  column(address1): varchar NULL
  column(address2): varchar NULL
  column(city): varchar NULL
  column(state): bpchar NULL
  column(postalcode): varchar NULL
  column(country): varchar NULL
}

note left of authors_8702b73d
Contact details for book authors
end note



table(books, books_b324c99f) {
  primary_key(id): int4 NOT NULL
  column(title): varchar NOT NULL
  column(description): varchar NULL
  column(publisherid): int4 NOT NULL
  column(publicationdate): date NULL
  column(price): float8 NULL
  foreign_key(previouseditionid): int4 NULL
}

note left of books_b324c99f
Details for published books
end note

note right of books_b324c99f::id #Aquamarine
Unique (internal) id for book
end note

note right of books_b324c99f::title #Aquamarine
Book title
end note

note right of books_b324c99f::description #Aquamarine
Book description
(Usually the blurb from the book jacket or promotional materials)
end note

note right of books_b324c99f::publisherid #Aquamarine
Foreign key to the book publisher
end note

note right of books_b324c99f::publicationdate #Aquamarine
Book publication date
end note

note right of books_b324c99f::price #Aquamarine
Current price for the book
end note



table(bookauthors, bookauthors_27311434) {
  foreign_key(bookid): int4 NOT NULL
  foreign_key(authorid): int4 NOT NULL
  column(somedata): varchar NULL
}

note left of bookauthors_27311434
Relationship between books and their authors, 
along with the latest updated information
end note




}


books_599266b.authors_8702b73d::id  }|--o| books_599266b.bookauthors_27311434::authorid : < z_fk_author
books_599266b.books_b324c99f::id  }|--o| books_599266b.books_b324c99f::previouseditionid : < fk_previousedition
books_599266b.books_b324c99f::id  }|--o| books_599266b.bookauthors_27311434::bookid : < bookauthors_bookid_fkey

@enduml
